#!/usr/bin/env sh

# Function to handle errors
handle_error() {
    echo "âŒ $1 failed!"
    exit 1
}

echo "ğŸ” Running code quality checks..."
echo "â³ Checking ESLint and Prettier rules..."

# Run lint-staged with better error handling
if ! npx lint-staged; then
    echo "âŒ Code quality checks failed!"
    echo "ğŸ“ Please fix the issues above and try committing again."
    echo "ğŸ’¡ You can run 'npm run lint:fix' and 'npm run format' to auto-fix some issues."
    exit 1
fi

echo "ğŸ§ª Running all tests..."
npm run test || handle_error "Tests"

echo "Code quality checks passed successfully!"
